<!-- templates/school/course_detail.html -->
{% extends "base.html" %}
{% block title %}Курс{% endblock %}
{% block content %}
  <h1>{{ course.name }}</h1>

  <p>
    <span class="tag">{{ course.course_type.name }}</span>
    {% if course.teacher %}
      <span class="muted">Преподаватель: {{ course.teacher.get_full_name|default:"Без имени" }}</span>
    {% endif %}
  </p>

  <div style="display:flex; gap:10px; flex-wrap:wrap; margin: 10px 0;">
    {% if mode == "student" or mode == "parent" %}
      <a class="btn btn-with-icon" href="/courses/{{ course.id }}/grades/{% if mode == 'parent' %}?student={{ student.id }}{% endif %}">
        {% include "partials/icon.html" with name="progress-chart" class_name="btn-icon" %}
        <span>Результаты</span>
      </a>
    {% endif %}
    {% if mode == "staff" and role == "ADMIN" %}
      <a class="btn btn-with-icon" href="/teacher/courses/{{ course.id }}/grades/">
        {% include "partials/icon.html" with name="progress-chart" class_name="btn-icon" %}
        <span>Ввод результата</span>
      </a>
    {% endif %}
    <a class="btn" href="/assignments/">Задания</a>
    <a class="btn" href="/lessons/">Уроки</a>
    <a class="btn" href="/calendar/">События</a>
    <a class="btn" href="/attendance/">Посещаемость</a>
  </div>

  {% if mode == "parent" %}
    <p class="muted">Ученик: {{ student.get_full_name|default:"Без имени" }} · Цикл: {{ student.profile.get_cycle_display }}</p>
  {% endif %}
{% endblock %}
