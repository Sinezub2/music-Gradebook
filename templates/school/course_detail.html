<!-- templates/school/course_detail.html -->
{% extends "base.html" %}
{% block title %}Курс{% endblock %}
{% block content %}
  <h1>{{ course.name }}</h1>

  <p>
    <span class="tag">{{ course.course_type.name }}</span>
    {% if course.teacher %}
      <span class="muted">Преподаватель: {{ course.teacher.username }}</span>
    {% endif %}
  </p>

  <div style="display:flex; gap:10px; flex-wrap:wrap; margin: 10px 0;">
    {% if mode != "staff" or role != "TEACHER" %}
      <a class="btn" href="/courses/{{ course.id }}/grades/{% if mode == 'parent' %}?student={{ student.id }}{% endif %}">Результаты</a>
    {% endif %}
    <a class="btn" href="/assignments/?course={{ course.id }}{% if mode == 'parent' %}&student={{ student.id }}{% endif %}">Задания</a>
    <a class="btn" href="/lessons/?course={{ course.id }}{% if mode == 'parent' %}&student={{ student.id }}{% endif %}">Уроки</a>
    <a class="btn" href="/calendar/?course={{ course.id }}{% if mode == 'parent' %}&student={{ student.id }}{% endif %}">События</a>
  </div>

  {% if mode == "parent" %}
    <p class="muted">Ученик: {{ student.username }} · Цикл: {{ student.profile.get_cycle_display }}</p>
  {% elif mode == "staff" %}
    <p class="muted">Для преподавателя/админа ввод результатов находится в разделе «Ввод результатов».</p>
  {% endif %}
{% endblock %}
